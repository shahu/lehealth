define("example/lehealth/bpmonitor",["jquery-mobile/1.4.4/jquery.mobile","./common","highcharts/4.0.3/highcharts-all","jquery","highcharts/4.0.3/highchartsTheme"],function(a,b){var c=a("jquery-mobile/1.4.4/jquery.mobile"),d=a("./common"),e="/api/bprecords";b.render=function(){c(document).bind("pageinit",function(){function b(){var a=d.getCookieByKey("loginid"),b=d.getCookieByKey("tk");a&&b?c.ajax({url:e,type:"GET",dataType:"json",async:!0,data:{loginid:a,token:b},success:function(a){if(a.errorcode){if(1==a.errorcode)return d.showDialog("请重新登录","bpmonitor"),void setTimeout(function(){c.mobile.changePage("/lehealth/login.html","slide")},2e3);d.showDialog("获取数据失败，请刷新界面","bpmonitor")}else{var b=a.result.score,e=g.series[0].points[0];e.update(b);var h=a.result.status;switch(h){case"1":c("#judge_text").html("稳定");break;case"2":c("#judge_text").html("波动")}for(var i=a.result.records,j=[],k=[],l=[],m=0;m<i.length;m++){var n=i[m];j.push(new Date(n.date).getDate()+"日"),k.push(n.dbp),l.push(n.sbp)}f.xAxis[0].setCategories(j),f.series[0].setData(k),f.series[1].setData(l)}},error:function(){d.showDialog("获取数据失败，请刷新界面","bpmonitor")}}):a||(d.showDialog("请重新登录","bpmonitor"),setTimeout(function(){c.mobile.changePage("/lehealth/login.html","slide")},2e3))}d.hideAddressBar();var f,g,h=2,i=a("highcharts/4.0.3/highcharts-all"),j=a("highcharts/4.0.3/highchartsTheme").getGridThemeOption();i.setOptions(j),c("#trendchart").highcharts({chart:{type:"line",backgroundColor:"#f9f9f9"},title:{text:""},subtitle:{text:""},xAxis:{categories:["1日","2日","3日","4日","5日","6日","7日"]},yAxis:{title:{text:""}},tooltip:{enabled:!0,formatter:function(){return"<b>"+this.series.name+"</b><br>"+this.x+": "+this.y}},plotOptions:{line:{dataLabels:{enabled:!0},enableMouseTracking:!1}},series:[{name:"舒张压",data:[90,90,90,90,90,90,90]},{name:"收缩压",data:[120,120,120,120,120,120,120]}],credits:{enabled:!1}},function(a){f=a,h--,0==h&&b()}),c("#judgechartcontainer").highcharts({chart:{type:"gauge",plotBackgroundColor:null,plotBackgroundImage:null,plotBorderWidth:0,plotShadow:!1,backgroundColor:"#f9f9f9"},title:{text:""},pane:{startAngle:-150,endAngle:150,background:[{backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#333"]]},borderWidth:0,outerRadius:"109%"},{backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#333"],[1,"#FFF"]]},borderWidth:1,outerRadius:"107%"},{},{backgroundColor:"#DDD",borderWidth:0,outerRadius:"105%",innerRadius:"103%"}],credits:{enabled:!1}},yAxis:{min:0,max:100,minorTickInterval:"auto",minorTickWidth:1,minorTickLength:10,minorTickPosition:"inside",minorTickColor:"#666",tickPixelInterval:30,tickWidth:2,tickPosition:"inside",tickLength:10,tickColor:"#666",labels:{step:2,rotation:"auto"},title:{text:"分"},plotBands:[{from:0,to:60,color:"#DF5353"},{from:60,to:80,color:"#DDDF0D"},{from:80,to:100,color:"#55BF3B"}]},series:[{name:"系统评估",data:[0],tooltip:{valueSuffix:" 分"}}],credits:{enabled:!1}},function(a){g=a,h--,0==h&&b()})})}}),define("example/lehealth/common",["jquery-mobile/1.4.4/jquery.mobile"],function(a,b){function c(a){var b,c={};c.href=a;for(var d in e)b=e[d].exec(a),c[d]=b[1],a=b[2],""===a&&(a="/"),"pathname"===d&&(c.pathname=b[1],c.search=b[2],c.hash=b[3]);return c}var d=a("jquery-mobile/1.4.4/jquery.mobile");b.hideAddressBar=function(){document.documentElement.scrollHeight<=document.documentElement.clientHeight&&(bodyTag=document.getElementsByTagName("body")[0],bodyTag.style.height=document.documentElement.clientWidth/screen.width*screen.height+"px"),setTimeout(function(){window.scrollTo(0,1)},0)};var e={protocol:/([^\/]+:)\/\/(.*)/i,host:/(^[^\:\/]+)((?:\/|:|$)?.*)/,port:/\:?([^\/]*)(\/?.*)/,pathname:/([^\?#]+)(\??[^#]*)(#?.*)/};b.getParams=function(a){var b=window.location.href,d=c(b).search,e={};if(d)for(var f=d.split("&"),g=0;g<f.length;g++){var h=f[g].split("=");2==h.length&&(e[h[0]]=decodeURIComponent(h[1]))}return e[a]},b.getCookieByKey=function(a){var b=document.cookie.split("; "),c={};for(var d in b){var e=b[d].split("=");2==e.length&&(c[e[0]]=decodeURIComponent(e[1]))}return c[a]},b.setCookie=function(a,b){var c=new Date;c.setTime(c.getTime()+31536e6),document.cookie=name+"="+escape(b)+";expires="+c.toGMTString()},b.showDialog=function(a,b){d("#"+b+" .dialog_text").html("<p>"+a+"</p>"),d("#"+b+" .dialog").popup(),d("#"+b+" .dialog").popup("open")},b.dismissDialog=function(a){d("#"+a+" .dialog").popup("close")}});
