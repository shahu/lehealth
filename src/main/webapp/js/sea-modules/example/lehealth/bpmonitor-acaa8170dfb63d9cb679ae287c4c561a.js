define("example/lehealth/bpmonitor",["jquery-mobile/1.4.4/jquery.mobile","./common","highcharts/4.0.3/highcharts-all","jquery","highcharts/4.0.3/highchartsTheme"],function(a,b){function c(a){var b=f.getCookieByKey("loginid"),c=f.getCookieByKey("tk");e.ajax({url:h,type:"GET",dataType:"json",async:!0,data:{loginid:b,token:c,days:a},success:function(b){if(b.errorcode){if(1==b.errorcode)return f.setCookie("jump","/lehealth/bpmonitor.html"),void e.mobile.changePage("/lehealth/login.html","slide");f.toast("获取数据失败，请刷新界面")}else{var c=(b.result.score,b.result.status);if(c)switch(c){case 1:e("#judge_text").html("您的血压状况偏低");break;case 2:e("#judge_text").html("您的血压状况正常");break;case 3:e("#judge_text").html("您的血压状况偏高")}else e("#judge_text").html("暂无您的血压状况评估");var g=b.result.records||[],h=!1;if(null!=g&&g.length>0){var i=new Date(g[g.length-1].date),j=new Date;j.getFullYear()==i.getFullYear()&&j.getMonth()==i.getMonth()&&j.getDate()==i.getDate()&&(h=!0)}if(e("#hasmedicate").html(h?"已经":"还未"),1==g.length){var k=g[0],l={};for(var m in k)l[m]=k[m];l.date+=36e5,g.push(l)}console.info(g);for(var n=0==g.length?!0:!1,j=(new Date).getTime(),m=0;a>m;m++)g.push({date:j-24*m*3600*1e3,dbp:null,sbp:null});for(var o=[],p=[],m=0;m<g.length;m++){var q=g[m];o.push([q.date,q.dbp,q.sbp]),p.push([q.date,q.heartrate])}console.info(o),console.info(p);var r=45*g.length>screen.width?45*g.length:screen.width;e("#trendchart").css("width",r+"px"),d(p,o,n)}},error:function(){f.toast("获取数据失败，请刷新界面")}})}function d(b,c,d){e("#trendchart").empty();var f=a("highcharts/4.0.3/highchartsTheme").getGridThemeOption();if(g.setOptions(f),d)var h=[{title:{text:"次",margin:0},lineWidth:1,min:0,max:200},{title:{text:"mmHg",margin:0},lineWidth:1,opposite:!0,min:0,max:200}];else var h=[{title:{text:"次",margin:0},lineWidth:1},{title:{text:"mmHg",margin:0},lineWidth:1,opposite:!0}];e("#trendchart").highcharts({chart:{type:"line",backgroundColor:"#f9f9f9"},title:{text:""},subtitle:{text:""},xAxis:{type:"datetime",dateTimeLabelFormats:{day:"%m.%e"}},yAxis:h,legend:{},tooltip:{dateTimeLabelFormats:{minute:"%m月%e日 %H:%M",second:"%m月%e日 %H:%M:%S"}},series:[{name:"血压",data:c,type:"arearange",lineWidth:0,linkedTo:":previous",color:Highcharts.getOptions().colors[0],fillOpacity:.3,zIndex:0,yAxis:0},{name:"心率",data:b,zIndex:1,marker:{fillColor:"white",lineWidth:2,lineColor:Highcharts.getOptions().colors[0]},yAxis:1}],credits:{enabled:!1}})}var e=a("jquery-mobile/1.4.4/jquery.mobile"),f=a("./common"),g=a("highcharts/4.0.3/highcharts-all"),h="/lehealth/api/bp/record/list";b.render=function(){e.mobile.loading("show",{text:"页面加载中...",textVisible:!0,theme:"c",html:""}),e(document).off("pageshow","#bpmonitor"),e(document).on("pageshow","#bpmonitor",function(){console.info("bpmonitor init"),e("#bpmonitorcover").css("display","none"),e.mobile.loading("hide"),e("#sevendaybtn").off("click"),e("#sevendaybtn").on("click",function(){e("#halfmonbtn").removeClass("ui-btn-active"),e("#sevendaybtn").addClass("ui-btn-active"),e("#monbtn").removeClass("ui-btn-active"),c(7)}),e("#monbtn").off("click"),e("#monbtn").on("click",function(){e("#halfmonbtn").removeClass("ui-btn-active"),e("#sevendaybtn").removeClass("ui-btn-active"),e("#monbtn").addClass("ui-btn-active"),c(30)}),e("#halfmonbtn").off("click"),e("#halfmonbtn").on("click",function(){e("#halfmonbtn").addClass("ui-btn-active"),e("#sevendaybtn").removeClass("ui-btn-active"),e("#monbtn").removeClass("ui-btn-active"),c(15)}),e("#sevendaybtn").addClass("ui-btn-active"),e("#sevendaybtn").click()})}}),define("example/lehealth/common",["jquery-mobile/1.4.4/jquery.mobile"],function(a,b){function c(a){var b,c={};c.href=a;for(var d in e)b=e[d].exec(a),c[d]=b[1],a=b[2],""===a&&(a="/"),"pathname"===d&&(c.pathname=b[1],c.search=b[2],c.hash=b[3]);return c}var d=a("jquery-mobile/1.4.4/jquery.mobile");b.hideAddressBar=function(){};var e={protocol:/([^\/]+:)\/\/(.*)/i,host:/(^[^\:\/]+)((?:\/|:|$)?.*)/,port:/\:?([^\/]*)(\/?.*)/,pathname:/([^\?#]+)(\??[^#]*)(#?.*)/};b.getParams=function(a){var b=window.location.href,d=c(b).search;console.info("params:"+d);var e={};if(d)for(var f=d.split("&"),g=0;g<f.length;g++){var h=f[g].split("=");2==h.length&&(e[h[0]]=decodeURIComponent(h[1]))}return e[a]},b.getCookieByKey=function(a){var b=document.cookie.split("; "),c={};for(var d in b){var e=b[d].split("=");2==e.length&&(c[e[0]]=decodeURIComponent(e[1]))}return c[a]},b.setCookie=function(a,b){var c=new Date;c.setTime(c.getTime()+31536e6),document.cookie=a+"="+escape(b)+";expires="+c.toGMTString()},b.showDialog=function(a,b){d("#"+b+" .dialog_text").html("<p>"+a+"</p>"),d("#"+b+" .dialog").popup(),d("#"+b+" .dialog").popup("open")},b.dismissDialog=function(a){d("#"+a+" .dialog").popup("close")},b.toast=function(a){d("<div class='ui-loader ui-overlay-shadow ui-body-f ui-corner-all' style='background-color:#f9f9f9'><h3>"+a+"</h3></div>").css({display:"block",opacity:.9,position:"fixed",padding:"7px","text-align":"center",width:"270px",left:(d(window).width()-284)/2,top:d(window).height()/2-30}).appendTo(d.mobile.pageContainer).delay(1500).fadeOut(400,function(){d(this).remove()})},b.arrayEqual=function(a,b){if(!a||!b)return a||b?!1:!0;if(a.length==b.length){for(var c=0;c<a.length;c++){for(var d=!1,e=0;e<b.length;e++)a[c]==b[e]&&(d=!0);if(!d)return!1}return!0}return!1}});
