define("example/lehealth/userconfig",["jquery-mobile/1.4.4/jquery.mobile","./common"],function(a,b){var c=a("jquery-mobile/1.4.4/jquery.mobile"),d=a("./common"),e="/lehealth/api/panient/info",f="/lehealth/api/panient/modify";b.bindEvent=function(){c(document).off("pageshow","#userconfigpage"),c(document).on("pageshow","#userconfigpage",function(){function a(){var a=d.getCookieByKey("loginid"),b=d.getCookieByKey("tk");c.ajax({url:e,type:"GET",dataType:"json",async:!0,data:{loginid:a,token:b},success:function(a){if(a.errorcode){if(1===a.errorcode)return d.setCookie("jump","/lehealth/config.html"),void c.mobile.changePage("/lehealth/login.html","slide");if(3==a.errorcode)return;d.toast("获取数据失败，请刷新界面")}else{var b=a.result;c("#uid").html(d.getCookieByKey("loginid")),c("#uname").val(b.username).textinput(),c("#uweight").val(b.weight).slider("refresh"),c("#uheight").val(b.height).slider("refresh"),0===b.gender?c("#male").attr("checked","checked"):c("#female").attr("checked","checked");var e=new Date(b.birthday),f=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,g=e.getDate()<10?"0"+e.getDate():e.getDate();birthday=e.getFullYear()+"-"+f+"-"+g,console.info(birthday),c("#ubirthday").val(birthday)}},error:function(){d.toast("获取数据失败，请刷新界面")}})}c("#userconfigcover").css("display","none"),a(),c("#unregister").off("click"),c("#unregister").on("click",function(){d.setCookie("loginid",""),d.setCookie("tk",""),c.mobile.changePage("/lehealth/login.html","slide")}),c("#save_userconfig").off("click"),c("#save_userconfig").on("click",function(){var a=d.getCookieByKey("loginid"),b=d.getCookieByKey("tk"),e=c("#uname").val(),g=c("#male").attr("checked")?0:1,h=c("#ubirthday").val(),i=c("#uheight").val(),j=c("#uweight").val();return e&&h?(h=new Date(h).getTime(),void c.ajax({url:f,type:"POST",dataType:"json",async:!0,data:{loginid:a,token:b,username:e,gender:g,birthday:h,height:i,weight:j},success:function(a){if(a.errorcode){if(1===a.errorcode)return d.setCookie("jump","/lehealth/bpconfig.html"),void c.mobile.changePage("/lehealth/login.html","slide");d.toast("提交数据失败，请重新提交")}else d.toast("提交成功");setTimeout(function(){c.mobile.changePage("/lehealth/config.html","slide")},2e3)},error:function(){d.toast("提交数据失败，请重新提交")}})):void d.toast("请填写完整的用户信息")})})}}),define("example/lehealth/common",["jquery-mobile/1.4.4/jquery.mobile"],function(a,b){function c(a){var b,c={};c.href=a;for(var d in e)b=e[d].exec(a),c[d]=b[1],a=b[2],""===a&&(a="/"),"pathname"===d&&(c.pathname=b[1],c.search=b[2],c.hash=b[3]);return c}var d=a("jquery-mobile/1.4.4/jquery.mobile");b.hideAddressBar=function(){};var e={protocol:/([^\/]+:)\/\/(.*)/i,host:/(^[^\:\/]+)((?:\/|:|$)?.*)/,port:/\:?([^\/]*)(\/?.*)/,pathname:/([^\?#]+)(\??[^#]*)(#?.*)/};b.getParams=function(a){var b=window.location.href,d=c(b).search;console.info("params:"+d);var e={};if(d)for(var f=d.split("&"),g=0;g<f.length;g++){var h=f[g].split("=");2==h.length&&(e[h[0]]=decodeURIComponent(h[1]))}return e[a]},b.getCookieByKey=function(a){var b=document.cookie.split("; "),c={};for(var d in b){var e=b[d].split("=");2==e.length&&(c[e[0]]=decodeURIComponent(e[1]))}return c[a]},b.setCookie=function(a,b){var c=new Date;c.setTime(c.getTime()+31536e6),document.cookie=a+"="+escape(b)+";expires="+c.toGMTString()},b.showDialog=function(a,b){d("#"+b+" .dialog_text").html("<p>"+a+"</p>"),d("#"+b+" .dialog").popup(),d("#"+b+" .dialog").popup("open")},b.dismissDialog=function(a){d("#"+a+" .dialog").popup("close")},b.toast=function(a){d("<div class='ui-loader ui-overlay-shadow ui-body-f ui-corner-all' style='background-color:#f9f9f9'><h3>"+a+"</h3></div>").css({display:"block",opacity:.9,position:"fixed",padding:"7px","text-align":"center",width:"270px",left:(d(window).width()-284)/2,top:d(window).height()/2-30}).appendTo(d.mobile.pageContainer).delay(1500).fadeOut(400,function(){d(this).remove()})},b.arrayEqual=function(a,b){if(!a||!b)return a||b?!1:!0;if(a.length==b.length){for(var c=0;c<a.length;c++){for(var d=!1,e=0;e<b.length;e++)a[c]==b[e]&&(d=!0);if(!d)return!1}return!0}return!1}});
